<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Les fonctions</title>
</head>
<body>
    <script>
        // function canDrive (age, pays) {
        //     if(
        //         (pays === 'FR' && age >= 18) ||
        //         (pays === 'US' && age >= 16)
        //     ) {
        //         return true
        //     }
        //     return false
        // }

        // const canDrive = function (age, pays) {
        //     if(
        //         (pays === 'FR' && age >= 18) ||
        //         (pays === 'US' && age >= 16)
        //     ) {
        //         return true
        //     }
        //     return false
        // }
        // console.log(canDrive(19, 'FR'))

        // fonction utilisant this
        // const a = {
        //     firstname: 'John',
        //     lastname: 'Doe',
        //     fullname: function() {
        //         console.log(`${this.firstname} ${this.lastname}`)
        //     }
        // }
        // a.fullname()
        // console.log('Hello'.toUpperCase())

        // fonction fléchée
        // const maFonction = (param1, param2) => {
        //     console.log(param1, param2)
        // }
        // maFonction(1, 2)


        // EXERCICE 1
        // on crée un nombre entre 0 et 10
        // 3 essais pour deviner le nombre
        // fonction isRight(n)
        // guess()
        // function getRandomInt(max) {
        //     return Math.floor(Math.random() * (max +1))
        // }

        // const solution = getRandomInt(10)
        //  console.log(solution)

        // function isRight(n) {
        //     return solution === n
        // }

        // function guess() {
        //     const number = prompt('Entrer un chiffre') * 1
        //     return isRight(number)
        // }

        // for(i = 0; i < 3; i++) {
        //     if(guess()) {
        //         console.log('Bravo');
        //         break;
        //     } else if(i === 2) {
        //         console.log('Vous avez perdu')
        //     }
        // }


        // EXERCICE 2
        // dire si un nombre est premier ou non
        // function isPremier(n) {
        //     if(n < 2) {
        //         return false
        //     }
        //     for(let i = n -1; i > 1; i--) {
        //         // console.log(i) 
        //         if(n % i === 0) {
        //             return false;
        //         };
        //     }
        //     return true
        // }

        // console.log('0', isPremier(0))
        // console.log('1', isPremier(1))
        // console.log('2', isPremier(2))
        // console.log('3', isPremier(3))
        // console.log('11', isPremier(11))
        // console.log('12', isPremier(12))


        // EXERCICE 3
        // savoir si un mot est un palindrome
        function isPalindrome(str) {
            // reverse (ne prend en paramètre que des tableaux)
            // split
            // join
            // toUpperCase
            // const letters = str.split('');
            // letters.reverse();
            // const reversedWord = letters.join('');
            // return str.toUpperCase() === reversedWord.toUpperCase();
            
            // OU
            const letters = str // on a un mot
                .split('') // que l'on explose en tableau
                .reverse() // tableau que l'on inverse
                .join(''); // tableau inversé que l'on rejoint par des guillemets
            return str.toUpperCase() === letters.toUpperCase();
            
            // console.log(letters);
            // console.log(reversedWord);

        }

        const words = {
            kayak: true,
            SOS: true,
            Kayak: true,
            Bonjour: false,
        }
        for(let word in words) {
            // if(isPalindrome(word) !== words[word]) {
            //     console.error(`isPalindrome(${word}) aurait dû renvoyer ${words[word]}`)
            // } else {
            //     console.log(`isPalindrome(${word}) return ${isPalindrome(word)} et renvoie bien ${words[word]}`)
            // }

            if(isPalindrome(word)) {
                console.log(`${word} est un palindrome`)
            } else {
                console.log(`${word} n'est pas un palindrome`)
            }
        }

        


        // EXERCICE 4
        // calculer la moyenne qu'à chacun des élèves
        // transformer l'objet pour ajouter une propriété moyenne à chacun des élèves qui contiendrait la moyenne des notes
        // on organise les élèves en fonction de la moyenne la plus élevée
        // on affiche en console un top 3 des élèves

        const students = [
            {
                name: 'John',
                notes: [1, 20, 18, 19, 12]
            },
            {
                name: 'Jane',
                notes: [17, 18, 20, 13, 15]
            },
            {
                name: 'Sophie',
                notes: [17, 12, 14, 15, 13]
            },
            {
                name: 'Marc',
                notes: [2, 3, 5, 8, 9]
            },
            {
                name: 'Manon',
                notes: [18, 17, 18, 19, 12]
            }
        ]

        const moyenne = (notes) => {
            let sum = 0;
            for(let note of notes) {
                sum = sum + note;
            }
            //console.log(sum / notes.length);
            return sum / notes.length;
        }
        //moyenne([10, 20])

        const compareStudent = (a, b) => {
            return b.moyenne - a.moyenne  // si b > a, donnera qch de négatif ; si a > b, donnera qch de positif
        }

        for(let student of students) {
            student.moyenne = moyenne(student.notes);
            student.worst = Math.min(...student.notes);
            student.best = Math.max(...student.notes)
        }

        // pour afficher le top 3 des meilleurs élèves
        const formatStudent = (student) => {
            return `${student.name} avec une moyenne de ${student.moyenne}, la meilleure note étant ${student.best} et la pire ${student.worst}.`
        }

        students.sort(compareStudent)
        console.log(students)

        // Répétition de code, donc création d'une fonction 'formatStudent'
        // console.log(`Top 3 des étudiants
        // 1: ${students[0].name} avec une moyenne de ${students[0].moyenne},
        // 2: ${students[1].name} avec une moyenne de ${students[1].moyenne},
        // 3: ${students[2].name} avec une moyenne de ${students[2].moyenne}`)

        console.log(`Top 3 des étudiants
        1: ${formatStudent(students[0])},
        2: ${formatStudent(students[1])},
        3: ${formatStudent(students[2])}`)

    </script>
</body>
</html>